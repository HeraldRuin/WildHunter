import{h as i,A as l}from"./vendor.js";(function(a){var r=a("#menu-app");if(r.length){var u=r.data("id");i({components:{Draggable:l},data:()=>({items:current_menu_items,item_types:[],custom_url:"",custom_name:"",name:current_menu_name,message:{type:!1,content:""},custom_show:!1,locations:current_menu_locations,currentIndex:current_items_index+1,triggerClass:{default:"drag-trigger"}}),mounted(){this.reloadTypes()},methods:{toogleItem(e){e._open?e._open=!1:e._open=!0},searchItems(e){a.ajax({url:bookingCore.admin_url+"/module/core/menu/searchTypeItems",data:{class:e.class,q:e.q},dataType:"json",type:"post",success:function(s){s.status&&(e.items=s.data)},error:function(s){console.log(s)}})},reloadItems(){var e=this;a.ajax({url:bookingCore.admin_url+"/module/core/menu/getItems",dataType:"json",type:"post",data:{id:u},success:function(s){s.data&&s.status&&(e.items=s.data)},error:function(s){console.log(s)}})},reloadTypes(){var e=this;a.ajax({url:bookingCore.admin_url+"/module/core/menu/getTypes",dataType:"json",type:"post",data:{},success:function(s){s.data&&s.status&&(e.item_types=s.data)},error:function(s){console.log(s)}})},addToMenu(e){if(!e.selected.length)return!1;for(var s=0;s<e.items.length;s++)if(e.selected.indexOf(e.items[s].id)>-1){var t=Object.assign({},e.items[s]);t._open=!0,this.items.push(t),this.currentIndex+=1,console.log(this.currentIndex)}e.selected=[]},addCustomUrl(){this.custom_name&&(this.items.push({name:this.custom_name,url:this.custom_url,item_model:"custom",_open:!1}),this.custom_name="",this.custom_url="")},parseMenuItems:function(e){for(var s=[],t=0;t<e.length;t++){var o=e[t],n=Object.assign({},o);delete n._vm,delete n.parent,delete n.style,delete n.children,delete n.style,delete n.innerStyle,delete n.innerBackClass,delete n.innerBackStyle,o.children&&(n.children=this.parseMenuItems(o.children)),s.push(n)}return s},saveMenu(){var e=this,s=this.parseMenuItems(this.items);a.ajax({url:bookingCore.admin_url+"/module/core/menu/store",dataType:"json",type:"post",data:{id:u,items:JSON.stringify(s),name:this.name,locations:this.locations,lang:current_menu_lang},success:function(t){t.message&&(e.message.content=t.message,e.message.type=t.status),t.url&&(window.location.href=t.url)},error:function(t){t.responseJSON.message?(e.message.content=t.responseJSON.message,e.message.type=!1):(e.message.content="Can not save menu",e.message.type=!1)}})},deleteMenuItem(e,s,t,o){e.preventDefault(),t.removeNodeByPath(o)}}}).mount("#menu-app")}})(jQuery);
//# sourceMappingURL=_menu.js.map
