(function(e){function u(i){for(var t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",l=a.length,n=0;n<i;n++)t+=a.charAt(Math.floor(Math.random()*l));return t}window.initEditorFor=function(i){var t=i.attr("id");t||(t=u(10),i.attr("id",t));var a=i.data("height");!a&&typeof a>"u"&&(a=300);var l=!0;i.attr("data-fullurl")==="true"&&(l=!1),tinymce.init({language:bookingCore.language,selector:"#"+t,plugins:"preview searchreplace autolink code fullscreen image link media codesample table charmap hr toc advlist lists wordcount textpattern help pagebreak hr",toolbar:"formatselect | bold italic strikethrough forecolor backcolor permanentpen formatpainter blockquote | link image media | alignleft aligncenter alignright alignjustify  | numlist bullist outdent indent  | pagebreak codesample code | removeformat",image_advtab:!1,image_caption:!1,toolbar_drawer:"sliding",relative_urls:!1,remove_script_host:l,height:a,file_picker_callback:function(n,s,d){d.filetype==="file"&&uploaderModal.show({multiple:!1,file_type:"video",onSelect:function(o){o.length&&n(o[0].full_size)}}),d.filetype==="image"&&uploaderModal.show({multiple:!1,file_type:"image",onSelect:function(o){console.log(o),o.length&&n(o[0].full_size)}}),d.filetype==="media"&&uploaderModal.show({multiple:!1,file_type:"video",onSelect:function(o){o.length&&n(o[0].full_size)}})}})},e(".has-ckeditor").each(function(){var i=e(this);initEditorFor(i)}),e(document).on("click",".dungdt-upload-box-normal .btn-field-upload,.dungdt-upload-box-normal .attach-demo",function(){let i=e(this).closest(".dungdt-upload-box");uploaderModal.show({multiple:!1,file_type:"image",onSelect:function(t){let a=t[0].edit_path!==void 0?t[0].edit_path:t[0].max_large_size;i.addClass("active"),i.find(".attach-demo").html('<img src="'+t[0].thumb_size+'"/>'),i.attr("data-val",t[0].id),i.find("input").val(t[0].id),i.find(".edit-img").attr("data-file",a)}})}),e(document).on("click",".dungdt-upload-box-normal .delete",function(i){i.preventDefault();let t=e(this).closest(".dungdt-upload-box");t.find("input").attr("value",""),t.removeClass("active")}),e(document).on("click",".dungdt-upload-box-normal .edit-img, .dungdt-upload-multiple .edit-img, .show_avatar .edit-img",function(i){i.preventDefault();let t=e(this),a=t.attr("data-file"),l=t.hasClass("edit-multiple")?"multiple":"single",n=l==="multiple"?t.closest(".dungdt-upload-multiple"):t.closest(".dungdt-upload-box"),s=l==="multiple"?t.attr("data-id"):n.attr("data-val"),d={language:image_editer.language,translations:image_editer.translations,reduceBeforeEdit:{mode:"manual",widthLimit:2500,heightLimit:2500}},o={onOpen:()=>{},onBeforeComplete:c=>!1,onComplete:function(c){var r=c.canvas.toDataURL("image/jpeg");l==="multiple"?t.closest(".image-item").find(".image-preview").attr("src",r):n.find(".attach-demo").html('<img src="'+r+'" alt="image-responsive" style="max-width: 150px">'),e.ajax({url:bookingCore.url+"/media/edit_image",method:"POST",dataType:"JSON",data:{image:r,image_id:s},success:function(m){console.log(m)}})}};new FilerobotImageEditor(d,o).open(a)}),e(".dungdt-upload-multiple").find(".btn-field-upload").click(function(){let i=e(this).closest(".dungdt-upload-multiple");uploaderModal.show({multiple:!0,file_type:"image",onSelect:function(t){if(typeof t<"u"&&t.length){var a=[],l="";i.addClass("active");for(var n=0;n<t.length;n++){let d=t[n].edit_path!==void 0?t[n].edit_path:t[n].max_large_size;a.push(t[n].id),l+='<div class="image-item"><div class="inner">',l+='<a class="edit-img btn btn-sm btn-primary edit-multiple" data-id="'+t[n].id+'" data-file="'+d+'"><i class="fa fa-edit"></i></a>',l+='<span class="delete btn btn-sm btn-danger"><i class="fa fa-trash"></i></span><div class="img-preview"><img class="image-responsive image-preview w-100" src="'+t[n].thumb_size+'"/></div></div></div>'}i.find(".attach-demo").append(l);var s=i.find("input").val().split(",");i.find("input").val(a.concat(s).join(","))}}})}),e(".dungdt-upload-multiple").on("click",".image-item .delete",function(){var i=e(this).closest(".image-item").index();let t=e(this).closest(".dungdt-upload-multiple");var a=t.find("input").val().split(",");a.splice(i,1),t.find("input").val(a.join(",")),e(this).closest(".image-item").remove()}),e(".open-edit-input").click(function(){e(this).replaceWith('<input type="text" name="'+e(this).data("name")+'" value="'+e(this).html()+'">')}),e(document).ready(function(){e(".dungdt-select2-field").each(function(){var i=e(this).data("options");e(this).select2(i)})}),e(".form-group-item").each(function(){e(this),e(this).on("click",".btn-remove-item",function(){e(this).closest(".item").remove()}),e(this).on("press","input,select",function(){let i=e(this).val();e(this).attr("value",i)})}),e(".form-group-item .btn-add-item").click(function(){var i=e(this).closest(".form-group-item").find(".g-items");let t=e(this).closest(".form-group-item").find(".g-items .item:last-child").data("number");t===void 0?t=0:t++;let a=e(this).closest(".form-group-item").find(".g-more").html();a=a.replace(/__name__=/gi,"name="),a=a.replace(/__number__/gi,t);const l=e(a);i.append(l),a.indexOf("dungdt-select2-field-lazy")>0&&i.find(".dungdt-select2-field-lazy").each(function(){var n=e(this).data("options");e(this).select2(n)}),l.find(".will-has-ckeditor")&&l.find(".will-has-ckeditor").each(function(){initEditorFor(e(this))})}),e("table .check-all").change(function(){e(this).is(":checked")?e(this).closest("table").find("tbody .check-item").prop("checked",!0):e(this).closest("table").find("tbody .check-item").prop("checked",!1)}),e(".dungdt-apply-form-btn").click(function(i){var t=e(this),a=t.closest("form").find("[name=action]").val(),l=function(){let n="";e(".bc-form-item .check-item").each(function(){e(this).is(":checked")&&(n+='<input type="hidden" name="ids[]" value="'+e(this).val()+'">')}),t.closest("form").append(n).submit()};a==="delete"||a==="permanently_delete"?bookingCoreApp.showConfirm({message:i18n.confirm_delete,callback:function(n){n&&l()}}):a==="recovery"?bookingCoreApp.showConfirm({message:i18n.confirm_recovery,callback:function(n){n&&l()}}):l()}),e(".dungdt-input-flag-icon").change(function(){e(this).closest(".input-group").find(".flag-icon").attr("class","").addClass("flag-icon flag-icon-"+e(this).val())}),e(".dungdt_input_locale").change(function(){}),e(".tag-input").keypress(function(i){if(i.keyCode==13){var t=e(this).val();if(t){var a='<span class="tag_item">'+t+`       <span data-role="remove"></span>
                                                    <input type="hidden" name="tag_name[]" value="`+t+`">
                                                </span>`;e(this).parent().find(".show_tags").append(a),e(this).val("")}return i.preventDefault(),!1}}),e(document).on("click","[data-role=remove]",function(){e(this).closest(".tag_item").remove()});var p=document.getElementsByClassName("needs-validation");Array.prototype.filter.call(p,function(i){i.addEventListener("submit",function(t){i.checkValidity()===!1&&(t.preventDefault(),t.stopPropagation()),i.classList.add("was-validated")},!1)}),jQuery(function(i){i(".has-datepicker").daterangepicker({singleDatePicker:!0,showCalendar:!1,autoUpdateInput:!1,sameDate:!0,autoApply:!0,disabledPast:!0,enableLoading:!0,showEventTooltip:!0,classNotAvailable:["disabled","off"],disableHightLight:!0,locale:{format:"YYYY/MM/DD"}}).on("apply.daterangepicker",function(t,a){i(this).val(a.startDate.format("YYYY/MM/DD"))})}),e(".bc-dropdown-toggle-filter").click(function(){var i=e(this).closest(".dropdown");i.find(".dropdown-menu").toggleClass("show")})})(jQuery);
//# sourceMappingURL=_form.js.map
