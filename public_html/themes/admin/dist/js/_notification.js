jQuery(function(o){var t=o(".dropdown-notifications"),l=t.find("div[data-toggle]"),a=l.find(".notification-icon"),e=parseInt(a.html()),r=t.find("ul.dropdown-list-items");if(o(document).on("click",".markAsRead",function(i){i.stopPropagation(),i.preventDefault();var n=o(this).data("id"),s=o(this).attr("href");o.ajax({url:bookingCore.markAsRead,data:{id:n},method:"post",success:function(v){window.location.href=s}})}),o(document).on("click",".markAllAsRead",function(i){i.stopPropagation(),i.preventDefault(),o.ajax({url:bookingCore.markAllAsRead,method:"post",success:function(n){o(".dropdown-notifications").find("li.notification").removeClass("active"),a.text(0),t.find(".notif-count").text(0)}})}),bookingCore.pusher_api_key&&bookingCore.pusher_cluster)var c=new Pusher(bookingCore.pusher_api_key,{encrypted:!0,cluster:bookingCore.pusher_cluster});var d=function(i){var n=r.html(),s='<li class="notification active"><div class="media">    <div class="media-left">      <div class="media-object">'+i.avatar+'      </div>    </div>    <div class="media-body">      <a class="markAsRead" data-id="'+i.idNotification+'" href="'+i.link+'">'+i.message+'</a>      <div class="notification-meta">        <small class="timestamp">about a few seconds ago</small>      </div>    </div>  </div></li>';r.html(s+n),e+=1,a.text(e),t.find(".notif-count").text(e)};if(bookingCore.isAdmin>0&&bookingCore.pusher_api_key){var f=c.subscribe("admin-channel");f.bind("App\\Events\\PusherNotificationAdminEvent",d)}if(bookingCore.currentUser>0&&bookingCore.pusher_api_key){var u=c.subscribe("user-channel-"+bookingCore.currentUser);u.bind("App\\Events\\PusherNotificationPrivateEvent",d)}});
//# sourceMappingURL=_notification.js.map
