(()=>{var e,t={230:()=>{window.LiveEventBus=new Vue({}),window.LivePreview=new Vue({data:{message:{content:"",type:!1},onSaving:!1,s:"",selectedBlockId:""},watch:{selectedBlockId:function(e){for(var t=document.getElementsByClassName("live-block-preview"),a=0;a<t.length;a++)t[a].classList.remove("selected");var o=e.replace(".","");document.getElementById("block-"+o).classList.add("selected")}},methods:{init:function(){var e=this;this.$nextTick((function(){window.addEventListener("message",(function(t){var a,o,n;if(null!=t&&null!==(a=t.data)&&void 0!==a&&a.action)switch(null==t||null===(n=t.data)||void 0===n?void 0:n.action){case"set_items":e.setItems(null==t||null===(o=t.data)||void 0===o?void 0:o.data);break;case"select-item":var i=t.data.data.replace(".","");$("body,html").animate({scrollTop:$("#block-"+i).offset().top},"fast"),e.selectedBlockId=t.data.data;break;case"save_block":e.updateBlock(t.data.data.id,t.data.data.model,t.data.data.tree);break;case"sort-end":e.sortEndFromParent(t.data.data);break;case"delete-item":e.deleteItemFromParent(t.data.data);break;case"add_block":e.addItemFromParent(t.data.data.id,t.data.data.model,t.data.data.blockType)}}))})),LiveEventBus.$on("select-item",(function(t){e.selectItem(t)}))},setItems:function(e){this[e]=e},selectItem:function(e){this.selectedBlockId=e,window.parent.postMessage({action:"select-item",data:{id:e}},"*")},updateBlock:function(e,t,a){var o=e.replace(".",""),n=$("#block-"+o).attr("wire:id"),i=Livewire.find(n);if(i){var d;if(Boolean(null===(d=Object.keys(t))||void 0===d?void 0:d.length))for(var l in t)i.$set(l,t[l],!1);i.preview(a)}},sortEndFromParent:function(e){var t=e.element,a=e.newIndex,o=e.oldIndex,n=this.items.ROOT.nodes;n.splice(o,1),n.splice(a,0,t),this.items.ROOT.nodes=n},deleteItemFromParent:function(e){},addItemFromParent:function(e,t,a){var o=this;$.ajax({url:bookingCore.admin_url+"/module/template/live/block-preview",dataType:"json",type:"post",data:{block:a,model:t,nodeId:e},success:function(t){t.preview&&($(".page-template-content").append(t.preview),setTimeout((function(){o.scrollToItem(e)}),100))},error:function(e){console.log(e)}})},scrollToItem:function(e){var t=e.replace(".","");$("body,html").animate({scrollTop:document.getElementById("block-"+t).offsetTop},"fast")},showAddLayer:function(){window.parent.postMessage({action:"show-add-layer"},"*")}}}),window.LivePreview.init(),$("a").on("click",(function(e){e.preventDefault()}))},338:()=>{}},a={};function o(e){var n=a[e];if(void 0!==n)return n.exports;var i=a[e]={exports:{}};return t[e](i,i.exports,o),i.exports}o.m=t,e=[],o.O=(t,a,n,i)=>{if(!a){var d=1/0;for(c=0;c<e.length;c++){for(var[a,n,i]=e[c],l=!0,r=0;r<a.length;r++)(!1&i||d>=i)&&Object.keys(o.O).every((e=>o.O[e](a[r])))?a.splice(r--,1):(l=!1,i<d&&(d=i));if(l){e.splice(c--,1);var s=n();void 0!==s&&(t=s)}}return t}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[a,n,i]},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={962:0,510:0};o.O.j=t=>0===e[t];var t=(t,a)=>{var n,i,[d,l,r]=a,s=0;if(d.some((t=>0!==e[t]))){for(n in l)o.o(l,n)&&(o.m[n]=l[n]);if(r)var c=r(o)}for(t&&t(a);s<d.length;s++)i=d[s],o.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return o.O(c)},a=self.webpackChunk=self.webpackChunk||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})(),o.O(void 0,[510],(()=>o(230)));var n=o.O(void 0,[510],(()=>o(338)));n=o.O(n)})();